<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trixi API Test Web App</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; background: #f9f9f9; }
    input, button { padding: 0.5rem; font-size: 1rem; margin-right: 0.5rem; }
    #output { white-space: pre-wrap; background: #fff; padding: 1rem; border: 1px solid #ccc; border-radius: 6px; margin-top: 1rem; }
    label { display: block; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Trixi API Test Web App</h1>

  <label>
    Twitter Username:
    <input type="text" id="username" placeholder="e.g. elonmusk" />
  </label>

  <button onclick="fetchProfile()">Fetch Profile</button>
  <button onclick="fetchTweets()">Fetch Tweets</button>
  <button onclick="analyzeProfile()">Analyze Profile</button>
  <button onclick="fetchUsage()">Check API Usage</button>

  <div id="output">Results will appear here...</div>

  <script>
    const API_KEY = '900d57a61c155c9253b684e21738b721651d2c1e3b5c0d479224a79e944ea246';
    const BASE_URL = 'https://api.trixiai.net/api/social/profile';

    function logOutput(text) {
      document.getElementById('output').textContent = text;
    }

    async function fetchFromAPI(endpoint) {
      try {
        const response = await fetch(endpoint, {
          headers: {
            'x-api-key': API_KEY,
            'Content-Type': 'application/json'
          }
        });
        const data = await response.text();
        logOutput(`Status: ${response.status}\n\n${data}`);
      } catch (err) {
        logOutput(`Error: ${err.message}`);
      }
    }

    function fetchProfile() {
      const username = document.getElementById('username').value.trim();
      if (!username) return logOutput('Please enter a username.');
      fetchFromAPI(`${BASE_URL}/${username}`);
    }

    function fetchTweets() {
      const username = document.getElementById('username').value.trim();
      if (!username) return logOutput('Please enter a username.');
      fetchFromAPI(`${BASE_URL}/${username}/tweets`);
    }

    function analyzeProfile() {
      const username = document.getElementById('username').value.trim();
      if (!username) return logOutput('Please enter a username.');
      fetchFromAPI(`${BASE_URL}/${username}/analyze`);
    }

    function fetchUsage() {
      fetchFromAPI('https://api.trixiai.net/api/social/usage');
    }
  </script>
</body>
</html>
